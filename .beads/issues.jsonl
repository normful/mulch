{"id":"mulch-0fj","title":"Add mulch sync command","description":"One command that validates records, stages .mulch/ changes, and commits. Instead of the 3-step dance (mulch validate, git add .mulch/, git commit), agents run mulch sync and it's done. Keep it simple: validate â†’ git add .mulch/ â†’ git commit with standard message. No daemon, no auto-push (agents can push themselves). Just reduce friction of the session-end workflow.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:14:54.773545-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T10:38:13.691063-08:00","closed_at":"2026-02-10T10:38:13.691063-08:00","close_reason":"Added mulch sync: validates records, git add .mulch/, git commit. Options: --message, --no-validate. Supports --json. Checks for git repo, handles no-changes case."}
{"id":"mulch-0ih","title":"--full flag ignored in prime command with default markdown format","description":"Bug: `mulch prime --full` produces identical output to `mulch prime` (compact format). The `--full` flag is supposed to include full record details (classification, evidence, grouped sections) but is silently ignored.\n\nRoot cause in src/commands/prime.ts line 196: the condition `options.verbose || format !== \"markdown\"` gates the non-compact formatter. `--full` is not checked, so with the default markdown format, the else branch always runs `formatDomainExpertiseCompact` which ignores the flag entirely.\n\nFix: Change the condition to `options.verbose || options.full || format !== \"markdown\"` so --full routes to `formatDomainExpertise` which respects the full option. Same fix needed for the output wrapper at line 223.","status":"closed","priority":1,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-12T10:40:31.275364-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T10:41:42.699454-08:00","closed_at":"2026-02-12T10:41:42.699454-08:00","close_reason":"Fixed: added options.full to routing conditions at prime.ts lines 196 and 223"}
{"id":"mulch-26n","title":"mulch prime should accept optional domain argument to scope output","description":"Currently mulch prime always outputs all domains. Add an optional positional argument (e.g. mulch prime cli) to output only that domain's expertise. Reduces context overload when agents only need one domain. Should validate the domain exists in config and error if not found.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T16:52:43.330753-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T16:55:03.101817-08:00","closed_at":"2026-02-09T16:55:03.101817-08:00","close_reason":"Added optional [domain] positional argument to mulch prime. Validates domain exists in config, errors with available domains if not found. Updated README, .mulch/README, and init template. 4 new tests."}
{"id":"mulch-2jf","title":"Compact prime mode (--compact)","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T17:23:16.254507-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T17:25:39.782813-08:00","closed_at":"2026-02-09T17:25:39.782813-08:00","close_reason":"Closed"}
{"id":"mulch-2vn","title":"Stable hash-based record IDs","description":"Replace 1-based JSONL line indices with stable short hashes (e.g. mx-a1b2). Current line-index IDs shift when records are deleted or reordered. Agents need stable references to update, link, and discuss specific records across sessions. Generate from content hash or random UUID at record creation time. Edit/delete by hash ID instead of line number.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:14:39.434907-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T10:35:07.372752-08:00","closed_at":"2026-02-10T10:35:07.372752-08:00","close_reason":"Added stable hash-based record IDs (mx-XXXXXX). Content-based SHA-256 hashing. Optional id field on BaseRecord + all 6 schema variants. Auto-generated in appendRecord/writeExpertiseFile. Edit command accepts ID or 1-based index. Lazy migration for existing records. 221 tests pass."}
{"id":"mulch-3kg","title":"Deduplication and idempotent recording","description":"mulch record always appends. Agents calling mulch record at session end will re-discover the same patterns and create duplicates. Need: (1) content-based dedup â€” skip if similar record exists, (2) named upsert â€” mulch record --name 'wal-mode' ... updates if exists, creates if not, (3) basic --if-not-exists flag. Without this, re-running seeding scripts or repeated agent sessions cause unbounded growth.","design":"Two dedup shapes: (A) exact re-discovery, (B) refined re-discovery. Named types (pattern/decision): upsert by name/title â€” if existing record matches, replace in place. Unnamed types (convention/failure): exact content/description match skips with message. --force flag overrides. ~30 lines in record command. No LLM needed.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T17:01:57.836585-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T17:08:54.51354-08:00","closed_at":"2026-02-09T17:08:54.51354-08:00","close_reason":"Added dedup to mulch record. Named types (pattern/decision) upsert by name/title. Unnamed types (convention/failure) skip on exact content match. --force flag overrides. 10 new tests."}
{"id":"mulch-3m8","title":"Add reference and guide record types","description":"Current record types (convention/pattern/failure/decision) miss two common expertise categories: (1) key_files / reference â€” 'this file matters because...' e.g. 'app/src/mcp/tools.ts is the MCP tool definitions file', (2) key_operations / guide â€” step-by-step procedures like 'how to add an MCP tool'. These are frequently needed by agents and don't map cleanly to existing types.","design":"Two new record types: (1) reference â€” 'this file/concept matters because...', required fields: name, description, optional files array. (2) guide â€” 'here's how to do X', required fields: name, description. Both get classification like other types. reference is pattern-oriented around what matters; guide is convention-like but procedural. Simple schema additions.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T17:02:00.192715-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T17:17:07.471479-08:00","closed_at":"2026-02-09T17:17:07.471479-08:00","close_reason":"Closed"}
{"id":"mulch-41r","title":"Add record deletion support","description":"There is no way to delete a record through the CLI. mulch edit has no --delete flag, and there is no mulch delete command. When an agent creates a junk record or needs to clean up, it has to manually edit the JSONL file. This is an agent-hostile gap. Add either: (a) mulch edit \u003cdomain\u003e \u003cindex\u003e --delete, or (b) a dedicated mulch delete \u003cdomain\u003e \u003cindex\u003e command. Should output JSON confirmation of what was deleted.","status":"closed","priority":1,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:35:22.367087-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T10:42:23.884773-08:00","closed_at":"2026-02-10T10:42:23.884773-08:00","close_reason":"Added mulch delete command with ID and index support, JSON output, and 5 tests"}
{"id":"mulch-4lv","title":"Add token budget limit to mulch prime with smart prioritization","description":"Projects with many mulch records can flood agent context windows. Add a --budget flag (default ~4000 tokens, roughly estimated via char count / 4) that caps prime output size. When the budget would be exceeded, prioritize records in this order: (1) conventions (always shown â€” these are essential project rules), (2) decisions, (3) patterns, (4) guides, (5) failures, (6) references. Within each type, sort by: foundational \u003e tactical \u003e observational classification, then by recency (newest first). When truncation occurs, show a summary line like '... and N more records across M domains (use --budget \u003cn\u003e to show more)'. The --full and --verbose flags should still respect the budget unless --no-limit is passed.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:45:17.121309-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:58:04.06225-08:00","closed_at":"2026-02-12T08:58:04.06225-08:00","close_reason":"Closed"}
{"id":"mulch-4nt","title":"Add --json flag to all commands","description":"Every mulch command should support --json for structured output. Currently only prime --mcp gives JSON. Agents need machine-readable output from search, status, query, record, edit, validate, prune â€” all of them. This is table stakes for agent tooling. Implementation: add a global --json flag, have each command output JSON when set. Keep human-readable as default.","status":"closed","priority":1,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:14:27.317199-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T10:34:49.880955-08:00","closed_at":"2026-02-10T10:34:49.880955-08:00","close_reason":"Already implemented â€” --json flag works on all commands"}
{"id":"mulch-4wp","title":"Add file-level locking for concurrent JSONL writes","description":"Several commands (record upsert, edit, delete, compact, prune) do readâ†’modifyâ†’write on JSONL files without locking. Add advisory file locking around writeExpertiseFile() calls to prevent race conditions when parallel agents write to the same domain. Tracks GitHub issue #2. Raised by @freke1981SWE in #1.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:28:32.758038-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:44:42.427128-08:00","closed_at":"2026-02-12T07:44:42.427128-08:00","close_reason":"Closed"}
{"id":"mulch-61k","title":"Add auto-update capability to mulch CLI","description":"mulch should be able to update itself automatically. Two possible approaches: (1) Integrate update checking into the 'doctor' command â€” doctor already checks project health, so it could also check if a newer version of mulch-cli is available on npm and offer to update. (2) Add a standalone auto-update mechanism that checks for updates periodically (e.g., on mulch prime or any command invocation) and either auto-updates or prompts the user. Consider: npm outdated / npm view mulch-cli version for version checking, npm install -g mulch-cli@latest for updating, frequency of checks (don't slow down every invocation), user opt-out config option.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-10T14:54:00.642937-08:00","created_by":"Jaymin West","updated_at":"2026-02-11T15:43:14.230476-08:00","closed_at":"2026-02-11T15:43:14.230476-08:00","close_reason":"Implemented version check in doctor + standalone update command"}
{"id":"mulch-64w","title":"Provider-optimized prime output (XML for Claude, plain text for Codex)","description":"Design spec says Claude gets XML tags, Cursor gets markdown, Codex gets plain text. formatPrimeOutput currently only outputs markdown. Add --format flag or detect provider from setup config.","status":"closed","priority":3,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T16:37:26.04373-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T16:42:31.364378-08:00","closed_at":"2026-02-09T16:42:31.364378-08:00","close_reason":"Added --format flag with xml (Claude-optimized), plain (Codex-optimized), and markdown (default). XML uses proper escaping and Claude-preferred tag structure."}
{"id":"mulch-7hy","title":"Record compaction (semantic decay)","description":"Instead of hard-deleting old records via prune, compact them: summarize N old records of the same type into 1 consolidated record. Agent-driven â€” mulch compact --analyze outputs candidates, agent provides the summary, mulch compact --apply writes it. Mulch does no LLM work, just bookkeeping. Similar to bd compact's analyze/apply workflow. Prevents knowledge loss while keeping context window small.","status":"closed","priority":3,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:14:58.841347-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T10:58:34.647032-08:00","closed_at":"2026-02-10T10:58:34.647032-08:00","close_reason":"Implemented mulch compact command with --analyze (finds compaction candidates by type grouping and staleness) and --apply (replaces N records with 1 consolidated record, foundational classification, supersedes links to source IDs). Full JSON mode support. 7 new tests, all 299 passing."}
{"id":"mulch-7pr","title":"Record linking and relations","description":"Let records reference each other with lightweight semantics: relates_to and supersedes. A failure can link to the pattern that fixed it. A convention can supersede an older convention. Not a full graph â€” just optional fields on records. Agents can follow knowledge chains: 'this failure led to this pattern' or 'this convention replaced that one'. Requires stable record IDs (mulch-4nt prerequisite: hash IDs).","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:14:45.404346-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T10:56:28.641362-08:00","closed_at":"2026-02-10T10:56:28.641362-08:00","close_reason":"Implemented relates_to and supersedes optional fields on all record types. Added CLI flags to record and edit commands, schema validation with mx-ID pattern, and rendering in all prime formats (markdown, compact, XML, plain text). 14 new tests, all 292 passing.","dependencies":[{"issue_id":"mulch-7pr","depends_on_id":"mulch-2vn","type":"blocks","created_at":"2026-02-10T10:15:04.499526-08:00","created_by":"Jaymin West"}]}
{"id":"mulch-8wp","title":"Add mulch learn command","description":"Session-end helper that outputs changed files from the last commit/diff to help agents decide what to record. Dead simple â€” no parsing, no inference, no LLM. Just: list changed files, list touched domains (from file paths in existing records), and prompt the agent to record learnings. The agent does the heavy lifting of deciding what's worth recording. Think: git diff --stat but formatted as a nudge.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:14:43.619618-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T10:46:11.845581-08:00","closed_at":"2026-02-10T10:46:11.845581-08:00","close_reason":"Added mulch learn command: shows changed files, matches to domains via record files fields, suggests where to record learnings. 6 tests."}
{"id":"mulch-9gb","title":"Fix flaky prune boundary test (tactical 14-day edge)","description":"test/commands/prune.test.ts 'tactical record exactly at boundary (14 days) is not pruned' fails intermittently. daysAgo(14) plus milliseconds of clock drift makes age 14.0000001, passing the \u003e 14 check. Fix: Math.floor the age-in-days computation in prune so boundary records are treated as exactly N whole days old.","status":"closed","priority":2,"issue_type":"bug","owner":"jayminwest@gmail.com","created_at":"2026-02-09T17:18:45.208441-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T17:20:49.425797-08:00","closed_at":"2026-02-09T17:20:49.425797-08:00","close_reason":"Closed"}
{"id":"mulch-aly","title":"mulch onboard should update existing project configs to match latest prompting","description":"When mulch releases prompting updates (e.g., the messaging sync in 0.2.2), running 'mulch onboard' on a project that was already onboarded should update the agent config snippets (CLAUDE.md sections, .cursorrules, etc.) to match the latest version's prompting. Currently onboard may skip or only append â€” it should detect stale mulch sections and replace them with the current version's text. This ensures projects stay in sync with upstream prompting improvements without manual editing. Consider: idempotent replacement of mulch-managed sections (using markers like the git hook pattern), version-stamping the injected config so onboard knows when it's outdated, a --check or --dry-run flag to show what would change.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-10T14:56:06.092639-08:00","created_by":"Jaymin West","updated_at":"2026-02-11T15:35:55.802333-08:00","closed_at":"2026-02-11T15:35:55.802333-08:00","close_reason":"Implemented idempotent onboard with marker-based updates, legacy migration, multi-location detection (.claude/CLAUDE.md), and --check flag. 332 tests pass.","comments":[{"id":1,"issue_id":"mulch-aly","author":"Jaymin West","text":"Also handle CLAUDE.md in alternate locations: Claude Code reads from both project root CLAUDE.md and .claude/CLAUDE.md. Onboard should: (1) check for existing mulch sections in CLAUDE.md at project root, (2) check .claude/CLAUDE.md, (3) if found in either location, update in place, (4) if found in neither, default to root (or prompt the user). This prevents creating duplicates and ensures users who keep project instructions in .claude/ aren't missed.","created_at":"2026-02-11T14:38:46Z"}]}
{"id":"mulch-btz","title":"Update README and docs with concurrency safety details","description":"After file locking (mulch-4wp), atomic writes (mulch-hnz), and swarm docs (mulch-g54) are implemented, update README.md and any other relevant docs (CLAUDE.md, onboard snippets) to reflect the new concurrency guarantees. Mention: flock-based locking, atomic temp+rename writes, and link to the swarm-safe usage guide.","status":"closed","priority":3,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:38:26.170801-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:49:54.233077-08:00","closed_at":"2026-02-12T07:49:54.233077-08:00","close_reason":"Updated CLAUDE.md with Concurrency Safety subsection and added concurrency note to onboard snippet in src/commands/onboard.ts","dependencies":[{"issue_id":"mulch-btz","depends_on_id":"mulch-4wp","type":"blocks","created_at":"2026-02-12T07:38:30.697463-08:00","created_by":"Jaymin West"},{"issue_id":"mulch-btz","depends_on_id":"mulch-hnz","type":"blocks","created_at":"2026-02-12T07:38:30.832997-08:00","created_by":"Jaymin West"},{"issue_id":"mulch-btz","depends_on_id":"mulch-g54","type":"blocks","created_at":"2026-02-12T07:38:30.968373-08:00","created_by":"Jaymin West"}]}
{"id":"mulch-e9p","title":"Make mulch prime default to compact output, add --verbose/-v flag for full output","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:59:49.992919-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T11:01:21.638147-08:00","closed_at":"2026-02-10T11:01:21.638147-08:00","close_reason":"Closed"}
{"id":"mulch-ecu","title":"Record relationships: tags and grouping","description":"Records are flat and isolated. A decision often explains why a convention exists; a failure often leads to a new pattern. Need at minimum: (1) tags â€” mulch record database --type convention --tags 'fts5,search' ..., (2) tag-based query â€” mulch query database --tag fts5, (3) optionally, explicit relationships like 'this failure led to this convention'. Even simple tags would enable cross-cutting queries like 'everything about FTS5'.","design":"Freeform --tags flag on mulch record. Tags are just string arrays, no controlled vocabulary, no validation. mulch search --tag fts5 filters records where tags includes value. Bad tags are noise not errors. Content search from #2 catches inconsistent tagging anyway.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T17:02:02.691048-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T17:26:08.664422-08:00","closed_at":"2026-02-09T17:26:08.664422-08:00","close_reason":"Closed"}
{"id":"mulch-feq","title":"mulch prime: multi-domain args and --domain flag form","description":"Single-domain scoping landed (mulch prime cli), but multi-agent architectures need: (1) multiple domain args: mulch prime database api testing, (2) --domain flag form: mulch prime --domain database. Setup claude hook should support per-agent domain scoping rather than global all-domain priming.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T17:01:52.838212-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T17:17:07.451494-08:00","closed_at":"2026-02-09T17:17:07.451494-08:00","close_reason":"Closed"}
{"id":"mulch-g54","title":"Document swarm-safe usage patterns","description":"Add documentation (README section or dedicated doc) covering which mulch commands are safe for parallel agents and which should be serialized. Safe: record (append), prime, search, status, query, validate. Unsafe without locking: record (upsert), edit, delete, compact, prune. Include recommended patterns for same-worktree swarms and multi-worktree setups.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:37:05.036058-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:48:23.25649-08:00","closed_at":"2026-02-12T07:48:23.25649-08:00","close_reason":"Added 'Concurrency \u0026 Multi-Agent Safety' section to README.md covering command safety table, swarm patterns (same-worktree and multi-worktree), locking mechanism, atomic writes, and edge cases.","dependencies":[{"issue_id":"mulch-g54","depends_on_id":"mulch-4wp","type":"blocks","created_at":"2026-02-12T07:37:10.078996-08:00","created_by":"Jaymin West"},{"issue_id":"mulch-g54","depends_on_id":"mulch-hnz","type":"blocks","created_at":"2026-02-12T07:37:10.224289-08:00","created_by":"Jaymin West"}]}
{"id":"mulch-gqy","title":"Add search/filter to mulch query","description":"mulch query dumps every record in a domain. Need: (1) mulch query --search 'FTS5' â€” find across all domains, (2) mulch query database --search 'WAL' â€” find within domain. For projects with 15+ records per domain, agents shouldn't consume all records to find the one about WAL mode. Currently read-everything-or-nothing.","design":"New 'mulch search' command. Brute-force substring matching across parsed JSONL fields (case-insensitive). Match all string-valued fields â€” content, description, name, title, rationale, resolution. CLI: mulch search \"FTS5\" (all domains), mulch search \"FTS5\" --domain database (scoped), mulch search \"FTS5\" --type failure (by type). Format matches same as mulch query. No index, no FTS, no embeddings. Sub-millisecond for \u003c1000 records.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T17:01:54.890857-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T17:08:52.142069-08:00","closed_at":"2026-02-09T17:08:52.142069-08:00","close_reason":"Added mulch search command with case-insensitive substring matching across all string fields. Supports --domain and --type filters. 10 new tests."}
{"id":"mulch-hnz","title":"Atomic JSONL writes via temp file + rename","description":"Replace direct writeFile() calls in writeExpertiseFile() with temp-file + rename pattern (write to .tmp.PID file, then os.rename to final path). Prevents partial reads when another agent runs mulch prime mid-write. Inspired by beads' approach in cmd/bd/export.go.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-12T07:37:02.231578-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T07:44:42.449122-08:00","closed_at":"2026-02-12T07:44:42.449122-08:00","close_reason":"Closed"}
{"id":"mulch-hyz","title":"Implement --full, --mcp, --export flags for mulch prime","description":"prime.ts declares --full, --mcp, and --export options but the action handler ignores them (_options unused). Implement: --full skips summarization and outputs all entries, --mcp outputs JSON for MCP tool responses, --export writes output to a file path.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-09T16:37:23.876536-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T16:39:08.817962-08:00","closed_at":"2026-02-09T16:39:08.817962-08:00","close_reason":"Implemented --full (shows classification + evidence), --mcp (JSON output), --export \u003cpath\u003e (write to file)"}
{"id":"mulch-izw","title":"mulch init should be idempotent â€” re-run initMulchDir even when .mulch/ exists","description":"Currently `mulch init` bails early with '.mulch/ already exists' if the directory is present. This means newly added init-time artifacts (like .gitattributes merge=union line or .mulch/README.md) don't get created for existing projects. The init command should re-run initMulchDir() to fill in missing pieces idempotently, since initMulchDir() already handles all the skip-if-present logic internally.","status":"closed","priority":2,"issue_type":"task","owner":"jayminwest@gmail.com","created_at":"2026-02-09T16:31:59.306989-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T16:35:33.440758-08:00","closed_at":"2026-02-09T16:35:33.440758-08:00","close_reason":"Made init idempotent â€” always runs initMulchDir, skips config/readme overwrite if already present"}
{"id":"mulch-jam","title":"Make search query optional for type-only filtering","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T17:23:17.191249-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T17:25:39.894799-08:00","closed_at":"2026-02-09T17:25:39.894799-08:00","close_reason":"Closed"}
{"id":"mulch-k9j","title":"Add mulch doctor command","description":"Single command for all health checks with --fix to auto-repair. Consolidates: schema validation (currently validate), stale record detection, orphaned domain detection, duplicate detection, config verification, JSONL integrity checks. Like bd doctor â€” one discoverable place for all health operations. Agents run mulch doctor and know if everything is healthy. --fix repairs what it can automatically.","status":"closed","priority":1,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:14:30.057166-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T10:37:17.612295-08:00","closed_at":"2026-02-10T10:37:17.612295-08:00","close_reason":"Added mulch doctor with 7 health checks (config, JSONL integrity, schema validation, stale records, orphaned domains, duplicates, governance) and --fix auto-repair. Supports --json."}
{"id":"mulch-kl0","title":"Add mulch edit command for modifying existing records","description":"Currently records are append-only with no way to modify. Add 'mulch edit \u003cdomain\u003e \u003crecord-id\u003e' to update fields on an existing entry. Must preserve the JSONL format (rewrite the line in place).","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T16:37:25.230685-08:00","created_by":"Jaymin West","updated_at":"2026-02-09T16:40:44.561897-08:00","closed_at":"2026-02-09T16:40:44.561897-08:00","close_reason":"Added mulch edit command with support for all record types, classification updates, and schema validation. 7 tests."}
{"id":"mulch-q5p","title":"Add session-end reminder section to mulch prime output","description":"mulch prime should include a prominent, urgent 'Session Close Protocol' section at the bottom (matching bd prime's urgency level with ðŸš¨ markers and CRITICAL/NEVER language). This reminds agents to record learnings before ending their session. The section should include: (1) A CRITICAL header making clear agents MUST run this before saying 'done', (2) a checklist: review work for insights, mulch record command template, mulch validate, git add .mulch/ \u0026\u0026 git commit, (3) 'NEVER skip this' reinforcement. This should appear in all non-MCP/JSON output formats (compact, verbose, xml, plain). Model it directly after bd prime's session close protocol tone and formatting.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-12T08:45:11.292823-08:00","created_by":"Jaymin West","updated_at":"2026-02-12T08:58:04.038424-08:00","closed_at":"2026-02-12T08:58:04.038424-08:00","close_reason":"Closed"}
{"id":"mulch-tul","title":"Context-aware priming","description":"mulch prime --context reads current git diff or staged files and filters expertise to only records relevant to those files. Keep it simple: match record file paths against changed files. No intent parsing, no semantic analysis. Just file-path intersection. If a record's files field mentions src/commands/record.ts and that file is in the diff, include it. Reduces context window waste without over-engineering.","status":"closed","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:14:48.333205-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T10:51:17.075736-08:00","closed_at":"2026-02-10T10:51:17.075736-08:00","close_reason":"Implemented --context flag on mulch prime. Extracts getChangedFiles/isGitRepo to src/utils/git.ts shared utility. filterByContext keeps records without files field (conventions, failures, decisions, guides) and filters pattern/reference records by file-path intersection with git changed files. 14 new tests, 278 total passing."}
{"id":"mulch-x5r","title":"Add mulch ready command","description":"Shows recently added/updated knowledge entries. Dead simple â€” no intent parsing, no domain inference, no smart context. Just answers: what's new or changed in expertise since last session? Sort by updated_at descending, show the most recent N records. Agents see what knowledge was captured recently and can build on it. Think git log for expertise.","status":"closed","priority":1,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-10T10:14:33.234457-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T10:37:17.756714-08:00","closed_at":"2026-02-10T10:37:17.756714-08:00","close_reason":"Added mulch ready showing recent expertise entries sorted by recorded_at. Options: --limit, --domain, --since (duration parser). Supports --json."}
{"id":"mulch-y3w","title":"Quality-based governance beyond time expiry","description":"Governance is time-based only: tactical expires at 14 days, observational at 30. No way to mark a record as superseded, deprecated, or low-confidence. Time is a poor proxy for relevance â€” a 2-day-old observational record might be noise, while a 60-day-old tactical record might still be critical. Need: (1) manual status flags (superseded, deprecated, low-confidence), (2) ability to mark records as still-relevant to override time-based expiry, (3) prune should consider quality signals not just age.","design":"Three mechanisms, implement in order of value: (A) Supersede chains â€” mulch record --supersedes 4 marks record #4 as superseded_by new record, excluded from prime output but kept on disk. Agent-driven, explicit. (B) Evidence grounding â€” mulch prune --check-evidence flags records whose evidence files were deleted. Automated, extends validate. (C) Access-based decay â€” bump last_served on prime/query reads, mulch prune --unused 30 removes unserved records. Clever but adds state to read path. Start with A.","status":"in_progress","priority":2,"issue_type":"feature","owner":"jayminwest@gmail.com","created_at":"2026-02-09T17:02:05.204035-08:00","created_by":"Jaymin West","updated_at":"2026-02-10T08:13:58.444404-08:00"}
